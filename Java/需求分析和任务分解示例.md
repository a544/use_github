# 问题驱动的需求分析和任务分解

# -- 以用户登录为例

## 需求描述

用户登录

## 需求分析

需求分析的基本方法是对需求描述中提到的概念提问:

- 是什么(what is)
- 为什么(why to use), 会怎样(then what)
- 用在哪(where to use)
- 怎么用(how to use)
- 如何实现(how to implement)
- 效果会怎么样(to what degree)

例如对需求"用户登录"中的概念"用户", "登录", "用户登录"提问: 

- 用户登录是什么? 用户是什么? 登录是什么? 
- 为什么要用户登录? 用户登录了又怎么样?
- 用户登录用在哪? 
- 怎么使用用户登录? 
- 如何实现用户登录? 
- 用户登录的效果如何? 

上述的问题可以分为: 

- 目的, why? then what?
- 场景
  - 条件, 用在哪where?  什么时候用when? 
  - 参与者, who? what?
  - 使用方法, 如何应用, how to use?
- 方案 
  - 具体方案, 如何实现, how to implement?
  - 达到目的的程度, to what degree?

### 需求的目的

回答问题: 为什么要用户登录?(why) 用户登录了又怎么样?(then what)

识别用户. 通过识别出不同的用户, 可以为不同的用户设置不同的权限, 提供不同的功能. 

### 需求的场景

#### 条件

回答问题: 用户在什么情况下需要登录? 用户登录用在哪where?  什么时候需要用户登录when?

场景1: 淘宝之类的电商应用系统需要的用户登录

场景2: 微信之类的即时通信应用需要的用户登录

场景3: 网络课程系统需要的用户登录

场景4: 搜狐之类的门户网站需要的用户登录

场景5: 邮箱之类的应用需要的用户登录

场景6: 网络游戏需要的用户登录 



#### 参与者

回答问题: 什么是用户? (what)

回答问题: 什么是用户? (what)

用户是系统的使用者. 可以有各方面的信息描述用户. 根据应用的场景识别用户的必须具有的那些方面的信息, 抽象出用户的模型. 当前的应用场景是用户登录, 那么只关注与用户登录相关的用户信息, 例如用户的唯一标识(userID). 

可以进一步提问,  与用户登录相关的用户信息有哪些? 这个问题与实现用户登录的方案, 用户完成用户登录的操作过程有关. 因此用户的详细信息在确定实现方案后进一步完善.

回答问题: 什么是登录? (what)

登录是用户开始使用(XX信息)系统. 

回答问题: 用户登录(到)什么? (what)

用户登录到应用系统. 应用系统为什么需要用户登录?(继续追问用户登录的目的)  不同的用户可以使用的功能是不一样的(进一步是权限分配和方位控制, 方便系统管理的角度).  识别出不同的用户可以为用户提供个性化的服务(方便用户使用的角度, 例如个性化的商品/新闻推荐, 个性化的功能菜单等). 

回答问题: 谁使用和管理用户登录?(who)

可以进一步提问, 什么应用系统需要用户登录? 什么应用系统不需要用户登录? 对任何用户都一视同仁的功能, 不需要用户登录. 

#### 如何应用

回答问题: 用户登录的操作过程是什么?(how to  use)

需要具体分析: 什么场景可以登录, 登录的操作过程是什么, 登录之后到达什么场景.

### 方案

#### 具体方案

具体方案, 如何实现, how to implement?

##### 可选的方案

回答问题: 如何实现用户登录?(how)

可以有多种识别用户的方案. 基本思路是根据YY识别出用户ZZ. 等价的问题是, 你说你是ZZ, 凭啥?

生物标志识别: 刷脸识别, 指纹之别, 声纹识别, 虹膜识别, 动作特征识别.

口令识别:  {用户名, 口令}

第三方登录: 微信扫码登录

##### 方案评价

回答问题: 每种方案都有什么优缺点?

评价方案的可行性, 难度, 成本和效果.

##### 方案选择

回答问题: 选择哪种用户登录方案?(条条大路, 只选一条; 弱水三千, 只饮一瓢)

这里假定选择相对简单的口令识别方案. 具体为 {用户名, 口令}

#### 效果预测

达到目的的程度, to what degree?

## 方案设计

### 更具体的实现方案

用户输入用户名和口令, 系统核对用户名和口令. 如果核对的结果为通过, 则登录成功; 否则, 登录失败.

### 时间维度的提问

回答问题: 在什么场景, 用户进行登录?

回答问题: 用户登录成功/失败, 分别达到什么场景?

成功则继续访问资源, 失败则提示登录失败, 询问是否需要重新登录. 

回答问题: 用户登录什么时间结束?

用户选择登出系统, 或者用户不活动超时, 或者用户关闭网页等等. 

### 相关系统的接口和相关场景

回答问题: 用户从哪里来? 口令从哪里来?

用户注册用户名和口令. 

回答问题: 如何标识一个用户? 

用户名, 需要唯一标识一个用户. 姓名, 身份证ID, 学号等可能重复的.

回答问题: 如何管理注册用户?

回答问题: 如果用户忘记密码, 如何处理?

## 架构设计

把应用领域的方案在信息领域的架构上实现. 

### 多层架构

假定选择的多层架构如下:
网页浏览器--(JSON)->RestController--->Service--->Repository--->DataBase

### 开发框架

把架构设计的方案用具体的开发框架实现.

#### 选择开发框架

网页浏览器--(JSON)->RestController--(POJO)->Service--(POJO)->DAO--->DataBase

网页浏览器采用HTML5+Vue

移动APP采用Android+Java

服务器端(Controller, Service, Repository)采用spring

DataBase采用MySQL

#### 开发任务

用户注册(User.register)

- [ ] 编写用户注册页面
- [ ] 编写RestController中的用户注册register方法, 调用Service的用户注册register方法
  - [ ] 如果注册页面要求输入两次口令, 那么可以在这里检查两次口令是否一致.
- [ ] 编写Service的用户注册register方法, 调用Repository的保存用户save方法
  - [ ] 可以在此处检查用户名是否在系统中已经被占用 
- [ ] 编写Repository的save方法, 保存User到数据库中
- [ ] 设计数据库表User

用户登录(User login)

- [ ] 编写用户登录页面
- [ ] 编写RestController中的用户登录login方法, 调用Service的用户登录login方法
- [ ] 编写Service的用户登录login方法, 调用Repository的查找用户findUser方法找到User后, 调用User的checkPassword方法检查口令是否正确
  - [ ] 如果检查口令通过, 设置用户登录成功标志
  - [ ] 如果检查口令没通过, 设置用户登录失败标志
  - [ ] 用户登录成功与否的标志与系统其它部分相关
- [ ] 编写Repository的findUser方法

用户登出(User logout)

- [ ] 编写用户登出页面
- [ ] 编写RestController中的用户登出logout方法, 调用Service的用户登出logout方法
- [ ] 编写Service的用户登出logout方法, 设置用户登录标志为用户登出.
  - [ ] 用户登出标志与系统其它部分相关
